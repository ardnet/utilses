{"version":3,"sources":["utils.min.js","/source/utils.js","/source/src/components/localstorage/LS.js","/source/src/utils.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","define","amd","utils","this","LS","_ls","window","localStorage","_listening","_listeners","value","val","undefined","remove","setItem","_serialize","defaultVal","_deserialize","getItem","removeItem","clear","ret","forEach","callback","get","addEventListener","_change","bind","attachEvent","e","fire","listener","JSON","parse","newValue","oldValue","url","uri","event","all","push","console","log","_listen","ns","lenght","splice","indexOf","fn","stringify","greet","utils___ls"],"mappings":"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","file":"utils.min.js","sourcesContent":[null,"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  global.utils = factory()\n}(this, function () { 'use strict';\n\n  /*global window*/\n  /**\n   *\n   */\n\n  class LS {\n\n    constructor() {\n      this._ls = window.localStorage;\n      this._listening = false;\n      this._listeners = {};\n    }\n\n    set(key, val) {\n\n      if (val === undefined) {\n        return this.remove(key);\n      }\n\n      this._ls.setItem(key, this._serialize(val));\n\n      return val;\n    }\n\n    get(key, defaultVal) {\n      return this._deserialize(this._ls.getItem(key));\n    }\n\n    remove(key) {\n      this._ls.removeItem(key);\n    }\n\n    clear() {\n      this._ls.clear();\n    }\n\n    getAll() {\n      var ret = {};\n\n      this.forEach(function(key, val) {\n        ret[key] = val;\n      });\n\n      return ret;\n    }\n\n    forEach(callback) {\n      let key;\n\n      for (let i = 0; i < this._ls.length; i++) {\n        key = this._ls.key(i);\n        callback(key, this.get(key));\n      }\n    }\n\n    _listen() {\n      if (window.addEventListener) {window.addEventListener('storage', this._change.bind(this), false);}\n      if (window.attachEvent) {window.attachEvent('storage', this._change.bind(this), false);}\n    }\n\n    _change(e) {\n      let fire = (listener) => {\n        listener(JSON.parse(e.newValue), JSON.parse(e.oldValue), e.url || e.uri);\n      };\n\n      if (!e) {\n        e = window.event;\n      }\n\n      let all = this._listeners(e.key);\n\n      if (all) {\n        all.forEach(fire);\n      }\n    }\n\n    on(key, callback) {\n      if (this._listeners[key]) {\n        this._listeners[key].push(callback);\n        console.log(this._listeners);\n      } else {\n        this._listeners[key] = [callback];\n        console.log(this._listeners);\n      }\n\n      if (!this._listening) {\n        this._listen();\n        console.log('to wazne wykonalo sie');\n      }\n    }\n\n    off(key, callback) {\n      let ns = this._listeners[key];\n\n      if (ns.lenght > 1) {\n        ns.splice(ns.indexOf(fn), 1);\n      } else {\n        this._listeners[key] = [];\n      }\n\n    }\n\n    _serialize(value) {\n      return JSON.stringify(value);\n    }\n\n    _deserialize(value) {\n      if (typeof value !== 'string') {\n        return undefined;\n      }\n\n      try {\n        return JSON.parse(value);\n      } catch (e) {\n        return value || undefined;\n      }\n    }\n  }\n\n  const utils = {\n    greet() {\n      return 'hello';\n    }\n  };\n\n  let utils___ls = new LS();\n\n  window._ls = utils___ls;\n\n  return utils;\n\n}));\n","/*global window*/\n/**\n *\n */\n\nclass LS {\n\n  constructor() {\n    this._ls = window.localStorage;\n    this._listening = false;\n    this._listeners = {};\n  }\n\n  set(key, val) {\n\n    if (val === undefined) {\n      return this.remove(key);\n    }\n\n    this._ls.setItem(key, this._serialize(val));\n\n    return val;\n  }\n\n  get(key, defaultVal) {\n    return this._deserialize(this._ls.getItem(key));\n  }\n\n  remove(key) {\n    this._ls.removeItem(key);\n  }\n\n  clear() {\n    this._ls.clear();\n  }\n\n  getAll() {\n    var ret = {};\n\n    this.forEach(function(key, val) {\n      ret[key] = val;\n    });\n\n    return ret;\n  }\n\n  forEach(callback) {\n    let key;\n\n    for (let i = 0; i < this._ls.length; i++) {\n      key = this._ls.key(i);\n      callback(key, this.get(key));\n    }\n  }\n\n  _listen() {\n    if (window.addEventListener) {window.addEventListener('storage', this._change.bind(this), false);}\n    if (window.attachEvent) {window.attachEvent('storage', this._change.bind(this), false);}\n  }\n\n  _change(e) {\n    let fire = (listener) => {\n      listener(JSON.parse(e.newValue), JSON.parse(e.oldValue), e.url || e.uri);\n    };\n\n    if (!e) {\n      e = window.event;\n    }\n\n    let all = this._listeners(e.key);\n\n    if (all) {\n      all.forEach(fire);\n    }\n  }\n\n  on(key, callback) {\n    if (this._listeners[key]) {\n      this._listeners[key].push(callback);\n      console.log(this._listeners);\n    } else {\n      this._listeners[key] = [callback];\n      console.log(this._listeners);\n    }\n\n    if (!this._listening) {\n      this._listen();\n      console.log('to wazne wykonalo sie');\n    }\n  }\n\n  off(key, callback) {\n    let ns = this._listeners[key];\n\n    if (ns.lenght > 1) {\n      ns.splice(ns.indexOf(fn), 1);\n    } else {\n      this._listeners[key] = [];\n    }\n\n  }\n\n  _serialize(value) {\n    return JSON.stringify(value);\n  }\n\n  _deserialize(value) {\n    if (typeof value !== 'string') {\n      return undefined;\n    }\n\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      return value || undefined;\n    }\n  }\n}\n\nexport {LS};\n","import {LS} from './components/localstorage/LS.js';\n\nconst utils = {\n  greet() {\n    return 'hello';\n  }\n};\n\nlet _ls = new LS();\n\nwindow._ls = _ls;\n\nexport default utils;\n\n"],"sourceRoot":"/source/"}